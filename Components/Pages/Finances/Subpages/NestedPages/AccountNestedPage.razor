@page "/finances/accounts/{id}"
@using Hearth.Services
@using Hearth.Data
@using Hearth.Finances.Parts
@using Hearth.Parts
@* @inject PlaidService _plaidService NET9 *@
@inject HearthDbContext _dbContext
<div class="na-main">
	<div class="na-header">
		<div class="h-info">
			<div class="h-name header-primary">
				@account.Name
			</div>
			<div class="h-bank header-tertiary">
				@account.Institution_Name
			</div>
			<div class="h-account-number header-tertiary">
				@account.Account_Number
			</div>
		</div>
		<div class="h-tools-and-status">
			<div class="h-tools">
				<HearthButton OnClick="HandleManageBtn" Icon="edit" /> @* TODO: make this change the page to show more account details *@
			</div>
			<div class="h-status header-secondary">
				<div class="header-secondary">@((account.Is_Open ?? true) ? "Open" : "Closed")</div> @* TODO: add account status *@
			</div>
		</div>
	</div>
	<div class="na-body">
		<section class="data-section">
			<div class="s-balance">
				<div class="b-type">
					Current
				</div>
				<div class="b-amount">
					@(account.Balance_Current?.ToString("C") ?? "- Unkown -")
				</div>
			</div>
		</section>

		<div class="b-header-2 header-secondary">
			Account Transactions
		</div>

		<section>
			<TransactionListPart Transactions="transactions" />
		</section>
	</div>
	<div class="na-footer">
	</div>
</div>

@* --- Edit Modal --- *@
<HearthModal Title="Edit Account"
			 Width="large"
			 Open="@showEditModal"
			 OnClose="@CloseEditModal"
>
	<div class="edit-modal-main">
		<div class="em-header">
			<div class="em-h-account-name">
				<HearthInput Label="Account Name" @bind-Value="@inputAccountName" Size="primary" />
			</div>
			<div class="em-h-account-status">
				<HearthCheckbox Label="Open" @bind-Value="inputIsOpen" />
			</div>
		</div>
		<div class="em-body">
			<div class="em-b-bank-name">
				<HearthInput Label="Bank Name" @bind-Value=@inputBankName Size="secondary" />
			</div>
			<div class="em-b-account-number">
				<HearthInput Label="Account #" @bind-Value=@inputAccountNumber Size="secondary" />
			</div>
		</div>
		<div class="em-footer">
			<div class="em-f-save">
				<HearthButton OnClick="HandleSaveAccountChanges" Label="Update" BgColor="green" Icon="plus"  />
			</div>
		</div>
	</div>
</HearthModal>

